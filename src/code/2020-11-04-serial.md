---
layout: code.njk
title: Serial
date: 2020-11-04
name: true
tags:
  - code
html:
  lang: html
css:
  lang: css
js:
  lang: javascript
  code: >-
    // import htm from 'https://cdn.skypack.dev/htm/preact';

    import { h, Component, render } from 'https://cdn.skypack.dev/preact';

    import htm from 'https://cdn.skypack.dev/htm';

    import { useState } from 'https://cdn.skypack.dev/preact/hooks';

    import { Note } from 'https://cdn.skypack.dev/@tonaljs/tonal';


    const html = htm.bind(h);


    const row0 = [10, 4, 6, 3, 5, 9, 2, 1, 7, 8, 11, 0];


    function createMatrix(row) {
      return row.map((n1) => {
        const distance = n1 - row[0];

        return row.map((n2) => {
          return (n2 - distance + 12) % 12;
        });
      });
    }


    const App = () => {
      const [toneRow, setToneRow] = useState(row0);
      const matrix = createMatrix(toneRow);

      return html`
        <table class="text-center w-full">
          ${matrix.map(
            (row) =>
              html`
                <tr>
                  ${row.map(
                    (n) =>
                      html`
                        <td class="border border-solid border-current">${Note.pitchClass(Note.fromMidi(n + 60))}</td>
                      `
                  )}
                </tr>
              `
          )}
        </table>
      `;
    };


    render(
      html`
        <${App} />
      `,
      document.body
    );
---
Display a tone row.